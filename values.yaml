# Default values for frkr
# This is a YAML-formatted file.

# Global configuration
global:
  imageRegistry: ""
  imagePullPolicy: IfNotPresent
  provider: "" # oci, aws, etc.

# Development configuration


# Initialization configuration
init:
  migrationsPath: "/migrations"
  databaseUrl: "" # Override if needed, otherwise derived from dataPlane

# Operator configuration
operator:
  enabled: true
  image:
    repository: frkr-operator
    tag: "0.1.1"
    pullPolicy: IfNotPresent
  replicaCount: 1
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Ingest Gateway configuration
ingestGateway:
  enabled: true
  image:
    repository: frkr-ingest-gateway
    tag: "0.1.0"
    pullPolicy: IfNotPresent
  replicaCount: 2
  service:
    type: ClusterIP
    annotations: {}
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 200m
      memory: 256Mi

# Streaming Gateway configuration
streamingGateway:
  enabled: true
  image:
    repository: frkr-streaming-gateway
    tag: "0.1.0"
    pullPolicy: IfNotPresent
  replicaCount: 2
  service:
    type: ClusterIP
    annotations: {}
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 200m
      memory: 256Mi

# Ingress configuration
ingress:
  enabled: true
  type: envoy
  envoy:
    enabled: true
    image:
      repository: envoyproxy/envoy
      tag: "latest"
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi

# Auth configuration
auth:
  type: composite  # composite (supports both basic + oidc), basic, or oidc
  oidc:
    issuerUrl: "https://dev-frkr.us.auth0.com/"
    clientId: "testing-client-id"
    audience: "https://api.frkr.io"
    clientSecretRef: ""



# Data plane configuration
dataPlane:
  # Set to "full" to include CockroachDB and Redpanda, or "byo" for BYO
  mode: byo
  db:
    host: "frkr-db"
    port: 5432
    database: "frkr"
    user: "root"
    password: ""
    # type: "postgres" # or "cockroachdb"
    type: "postgres"
    sslMode: "disable"
  broker:
    brokers: ["frkr-redpanda:9092"]
    tlsEnabled: false
    tlsConfigRef: ""

# Infrastructure provisioning (optional)
infrastructure:
  mockOIDC:
    enabled: false
  db:
    user: "root"
    password: "password"
    name: "frkr"

  cockroachdb:
    provision: false
    image:
      repository: cockroachdb/cockroach
      tag: "latest"
    resources:
      limits:
        cpu: 2000m
        memory: 4Gi
      requests:
        cpu: 1000m
        memory: 2Gi
    storage:
      size: 10Gi
      storageClassName: standard
  redpanda:
    provision: false
    image:
      repository: docker.redpanda.com/redpandadata/redpanda
      tag: "latest"
    resources:
      limits:
        cpu: 2000m
        memory: 4Gi
      requests:
        cpu: 1000m
        memory: 2Gi
  postgres:
    provision: false
    image:
      repository: postgres
      tag: "15-alpine"
    resources:
      limits:
        cpu: 1000m
        memory: 1Gi
      requests:
        cpu: 100m
        memory: 256Mi
    storage:
      size: 10Gi
      storageClassName: standard

# Platform dependencies configuration
# These are Kubernetes platform-level components required by frkr
platform:
  # Kubernetes Gateway API CRDs (HTTPRoute, Gateway, etc.)
  # Note: This is the kubernetes-sigs/gateway-api project, NOT frkr gateways
  k8sGatewayAPI:
    install: true
    version: "v1.2.1"
    manifestUrl: "https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.2.1/standard-install.yaml"
  
  # cert-manager for TLS certificate management
  certManager:
    install: false  # Enable for production with TLS
    installCRDs: true
    version: "v1.14.0"

